# Backend Service

–û—Å–Ω–æ–≤–Ω–æ–π API —Å–µ—Ä–≤–µ—Ä —Å–∏—Å—Ç–µ–º—ã —É—á–µ—Ç–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –ª–∏—Ü.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Å–∏—Å—Ç–µ–º—ã:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏—è–º–∏ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã –æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
- API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Node.js 18+** - Runtime
- **TypeScript** - –¢–∏–ø–∏–∑–∞—Ü–∏—è
- **Express.js** - Web framework
- **Prisma ORM** - Database ORM
- **PostgreSQL** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **WebSocket** - Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ modules/          # –ú–æ–¥—É–ª–∏ (auth, users, cameras, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # Express middleware
‚îÇ   ‚îú‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã (encryption, jwt)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma    # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ migrations/      # –ú–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ package.json
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–°–º–æ—Ç—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:
- [macOS](./SETUP_MACOS.md)
- [Windows](./SETUP_WINDOWS.md)

## üìö API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `POST /auth/logout` - –í—ã—Ö–æ–¥

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /users` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /users/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–æ–º–ø–∞–Ω–∏–∏
- `GET /companies` - –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π
- `POST /companies` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

### –ö–∞–º–µ—Ä—ã
- `GET /cameras` - –°–ø–∏—Å–æ–∫ –∫–∞–º–µ—Ä
- `POST /cameras` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
- `PATCH /cameras/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã

### –°–æ–±—ã—Ç–∏—è
- `GET /events` - –°–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- `POST /events` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (–æ—Ç Recognition Service)

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
- `GET /employees` - –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `POST /employees` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- `POST /employees/:id/photo` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã (access + refresh)
- Bcrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- AES-256 —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–∞–º–µ—Ä
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Rate limiting (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL —Å Prisma ORM.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `User` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `Company` - –ö–æ–º–ø–∞–Ω–∏–∏
- `Camera` - IP-–∫–∞–º–µ—Ä—ã
- `Employee` - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
- `Event` - –°–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- `Presence` - –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**Camera Gateway:** Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL —Å—Ç—Ä–∏–º–æ–≤
**Recognition Service:** –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ POST /events
**Frontend:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏

---

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ [SETUP_MACOS.md](./SETUP_MACOS.md) –∏–ª–∏ [SETUP_WINDOWS.md](./SETUP_WINDOWS.md)
